<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.18.1 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>2020-04-05-formula-one - Kyle Amyx</title>
<meta name="description" content="Data Science Portfolio ">



<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Kyle Amyx">
<meta property="og:title" content="2020-04-05-formula-one">
<meta property="og:url" content="http://localhost:4000/formula-one/2020-04-05-formula-one.Rmd">


  <meta property="og:description" content="Data Science Portfolio ">







  <meta property="article:published_time" content="2020-01-05T00:00:00-05:00">





  

  


<link rel="canonical" href="http://localhost:4000/formula-one/2020-04-05-formula-one.Rmd">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Kyle Amyx",
      "url": "http://localhost:4000/"
    
  }
</script>






<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Kyle Amyx Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/osu_logo_small.png" alt=""></a>
        
        <a class="site-title" href="/">
          Kyle Amyx
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/about/" >About</a>
            </li><li class="masthead__menu-item">
              <a href="/datascience/" >Data science</a>
            </li><li class="masthead__menu-item">
              <a href="/android/" >Mobile Dev</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name"></h3>
    
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="2020-04-05-formula-one">
    
    <meta itemprop="datePublished" content="2020-01-05T00:00:00-05:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">2020-04-05-formula-one
</h1>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
        ```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse, ggplot2)
```

## F1 Predictive Modeling

I can't currently find the source of data but it is an extensive set made of multiple tables for years (1950-2017)


```{r F1 Header}
x = c(rep(1,10), 1:5, 1:5, rep(1,10), 9:13, rep(11,10), 9:10)
y <- c(1:10, rep(10, 5), rep(7,5), 1:10, rep(1, 5),  1:10, 8:9)

plot(x,y, pch=19, xlab="", ylab = "", xaxt="n", yaxt="n")
qplot(x= x, y=y)

```

Data is broken down into multiple csv files which will need to be joined on common parameters to gain any insights:
* Circuits
* Lap Times
* Races
* Drivers
* Driver Standings
* Results
* More used for reference

```{r data}
circuits = read.csv("Data(1950_2017)/circuits.csv")
lapTimes = read.csv("Data(1950_2017)/lapTimes.csv", stringsAsFactors = FALSE)
races = read.csv("Data(1950_2017)/races.csv", stringsAsFactors = FALSE)
results = read.csv("Data(1950_2017)/results.csv")
drivers = read.csv("Data(1950_2017)/drivers.csv")
driverStandings = read.csv("Data(1950_2017)/driverStandings.csv")

```


Let's start by exploring the `Drivers` dataset. 
```{r drivers-overview}
# What data types are the features in this set?
sapply(drivers, class)
```

# Drivers

F1 is scored in points, looking at which drivers have the most all-time points. Keep in mind this is dating back to 1950. I'm not familiar if the way Grand Prix are scored has changed. It's safe to say that for our purpose of predicting future grand prix winners, we will narrow our focus to current drivers. However out of curiousity, let's look at the all time high scorers. 

```{r}

drivers_ = merge(drivers, driverStandings, by="driverId")

driverPoints = drivers_ %>% 
  group_by(driverId, driverRef, dob) %>% 
  summarize(points = sum(points))

ggplot(data = driverPoints, aes(x=driverId,y=points, label=driverRef)) + geom_point() 
```


Too much, cut off at 10,000 points and label
```{r}
fil = as_tibble(driverPoints) %>%
  select(driverId, points, driverRef) %>%
  group_by(driverId,  driverRef) %>%
  summarise(points = sum(points)) 
fil = fil[fil$points > 10000,]
  ggplot(data = fil, aes(x=driverId, y = points, label = driverRef)) + geom_point() + geom_label()
```


Not a very good visual, we can better compare the drivers points with a bar/histogram style
```{r top driver hist}
  ggplot(data = fil, aes(x=reorder(driverRef, points), y=points, fill=points)) + geom_bar(stat="sum") + ggtitle("Top drivers by points") + 
  xlab("Driver Name") + ylab("Points") + 
  scale_x_discrete(labels = function(labels) {
    fixedLabels <- c()
    for(n in 1:length(labels)) {
      fixedLabels[n] <- paste0(ifelse(n %% 2 ==0, "" ,"\n"), labels[n])
    }
    return(fixedLabels)
  })
```

```{r driverId_vector, include=FALSE}
driverId_vec = c('webber', 'massa', 'button', 'michael_schumacher', 'raikkonen', 'rosberg', 'alonso', ' vettel', 'hamilton')
```


Are all of these drivers still alive and competing?




# Races


```{r races}
summary(races)
```
Let's do some EDA on the circuits. Take a look at which races have the shortest lap time.
```{r race-laptimes}
driver_laps <- merge(races, lapTimes, by = "raceId")
head(driver_laps)
# Only looking at last 10 years
driver_laps <- driver_laps[driver_laps$year > 2008,]
#Add driver name to set
driver_laps <- merge(driver_laps, drivers[,1:2], by = "driverId")
length(unique(driver_laps$circuitId))
length(unique(driver_laps$raceId))


temp = driver_laps %>% 
  group_by(driverRef, circuitId, raceId, name)

prix_list = races[races$year > 2015,]
prix_list = unique(prix_list$name)

temp = temp[as.character(temp$name) %in% prix_list,]
unique(temp$circuitId)

for(i in 1:length(prix_list)){
set = temp %>%
  group_by(driverRef) %>%
  filter(driverRef %in% driverId_vec) %>%
  filter(name == prix_list[i]) %>%
  summarise(avg = mean(milliseconds))
  driverLapTimePlot = ggplot(data = set, aes(x= reorder(driverRef,avg), y = avg, fill = avg)) + geom_bar(stat="sum") + ggtitle(prix_list[i]) + scale_x_discrete(labels = function(labels){
    fixedLabels = c()
    for(n in 1:length(labels)){
      fixedLabels[n] = paste0(ifelse(n %% 2 == 0, "", "\n"), labels[n])
    }
    return(fixedLabels)
  }
  )
  print(driverLapTimePlot)
}
```




# Results

```{r results}
summary(results)
```

```{r driver s}
summary(drivers)
```


Let's create our `MASTER` set here, containing all info we can foresee as necessary going forward. 


## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
boxplot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.


        
      </section>

      <footer class="page__meta">
        
        


        
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2020-01-05T00:00:00-05:00">January 5, 2020</time></p>
        
      </footer>

      

      
    </div>

    
  </article>

  
  
</div>

    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
      
        
      
        
      
        
      
        
      
        
      
    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2020 Kyle Amyx. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>
  <script src="https://kit.fontawesome.com/4eee35f757.js"></script>















  </body>
</html>
